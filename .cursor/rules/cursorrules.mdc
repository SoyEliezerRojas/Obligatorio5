---
description: 
globs: 
alwaysApply: false
---
# REGLAS DEL PROYECTO - CAltaFuncion y en general
# ====================================

## ğŸ¯ DEPENDENCIAS UML - CUMPLIMIENTO ESTRICTO

### Reglas de Visibilidad por Clase:
- **CAltaFuncion** puede SOLAMENTE ver a: ManejadorFuncion, Funcion, Pelicula, Cine, ManejadorPelicula, ManejadorCine
- **Pelicula** puede SOLAMENTE ver a: Cine
- **Cine** puede SOLAMENTE ver a: Sala  
- **Sala** puede SOLAMENTE ver a: Funcion
- **Funcion** puede SOLAMENTE ver a: Pelicula
- **ManejadorPelicula** puede SOLAMENTE ver a: Pelicula
- **ManejadorCine** puede SOLAMENTE ver a: Cine
- **ManejadorFuncion** puede SOLAMENTE ver a: Funcion

### âŒ VIOLACIONES PROHIBIDAS:
- CAltaFuncion NO puede ver: Sesion, Usuario, ManejadorUsuario, Reserva
- Cine NO puede ver: Funcion, ManejadorFuncion, Pelicula
- ManejadorFuncion NO puede ver: Cine, Sala, ManejadorCine
- ManejadorCine NO puede ver: Funcion, Sala, ManejadorFuncion
- Cualquier Manejador NO puede ver a otros Manejadores

## ğŸ“ REGLAS DE INCLUDES

### OBLIGATORIO:
- NUNCA usar forward declarations (`class ClassName;`)
- SIEMPRE usar includes directos (`#include "ClassName.h"`)
- Incluir TODAS las dependencias explÃ­citamente en archivos header
- Verificar que todos los tipos utilizados estÃ©n incluidos

### EJEMPLO CORRECTO:
```cpp
// âœ… CORRECTO
#include "Pelicula.h"
#include "DtSala.h"
#include "Funcion.h"

// âŒ INCORRECTO  
class Pelicula;  // NUNCA HACER ESTO
```

## ğŸ—ï¸ ARQUITECTURA Y FLUJO DE DATOS

### Flujo Correcto del Caso de Uso AltaFuncion:
1. CAltaFuncion â†’ ManejadorPelicula â†’ getPeliculas()
2. CAltaFuncion â†’ ManejadorCine â†’ getCines()  
3. CAltaFuncion â†’ Cine â†’ getSalas()
4. CAltaFuncion â†’ Sala â†’ getDtSalaCompleta() (Sala puede ver Funcion)
5. CAltaFuncion â†’ ManejadorFuncion â†’ agregarFuncion()

### Principios:
- Los Dt* (Data Transfer) son creados por quien puede ver las dependencias
- Sala crea DtSala completo porque puede ver Funcion
- Cine NO puede crear DtSala con funciones porque no ve Funcion
- Usar la jerarquÃ­a: CAltaFuncion â†’ Manejador â†’ Entidad â†’ Dependencias

## ğŸ”§ REGLAS DE COMPILACIÃ“N

### OBLIGATORIO:
- Verificar compilaciÃ³n despuÃ©s de CADA cambio
- Resolver errores de includes inmediatamente
- NO adivinar soluciones, verificar dependencias UML primero
- Si hay error de compilaciÃ³n, revisar primero las dependencias UML

### ERRORES COMUNES A EVITAR:
- Incluir clases que no deberÃ­an ser visibles segÃºn UML
- Asumir que las dependencias transitivas funcionarÃ¡n
- Crear mÃ©todos que violen las dependencias UML

## ğŸ“ ESTILO DE CÃ“DIGO

### Naming Conventions:
- Clases: PascalCase (ej: `CAltaFuncion`, `ManejadorCine`)
- MÃ©todos: camelCase (ej: `listarPeliculas`, `getDtSalaCompleta`)
- Atributos privados: camelCase con this-> (ej: `this->peliculaSeleccionada`)
- Constantes: UPPER_CASE

### Comentarios:
- Explicar WHY se hace algo, no WHAT se hace
- Comentar cuando se respetan dependencias UML especÃ­ficas
- Documentar flujos de caso de uso complejos

## âš ï¸ CASOS ESPECIALES DEL PROYECTO

### Manejo de SesiÃ³n:
- CAltaFuncion NO puede acceder directamente a Sesion
- El caso de uso asume usuario ya logueado: `return true;`
- NUNCA incluir ManejadorUsuario en CAltaFuncion

### InformaciÃ³n de OcupaciÃ³n de Salas:
- Sala puede ver Funcion â†’ Sala crea DtSala completo con funciones
- Cine NO puede ver Funcion â†’ Cine solo proporciona info bÃ¡sica de salas
- CAltaFuncion usa Sala.getDtSalaCompleta() para mostrar ocupaciÃ³n

### AsignaciÃ³n de Funciones:
- CAltaFuncion puede acceder directamente a Sala a travÃ©s de Cine
- CAltaFuncion hace: Cine â†’ getSalas() â†’ Sala â†’ agregarFuncion()
- NO usar mÃ©todos intermedios que violen dependencias UML

## ğŸš« ANTI-PATRONES PROHIBIDOS

### NUNCA hacer:
- Forward declarations
- Dependencias circulares
- Acceso directo violando UML (ej: ManejadorFuncion â†’ Cine)
- Asumir que "deberÃ­a funcionar" sin verificar UML
- Crear mÃ©todos helper que violen dependencias

### Si hay duda:
1. Consultar el diagrama UML primero
2. Verificar quÃ© clases puede ver cada clase
3. Buscar ruta vÃ¡lida respetando dependencias
4. Preguntar si no estÃ¡ claro

## âœ… VERIFICACIÃ“N FINAL

Antes de completar cualquier tarea:
1. âœ… Â¿Se respetan TODAS las dependencias UML?
2. âœ… Â¿No hay forward declarations?
3. âœ… Â¿Compila sin errores?
4. âœ… Â¿El flujo sigue la arquitectura correcta?
5. âœ… Â¿Los comentarios explican las decisiones de arquitectura?

---

**REGLA DE ORO: Cuando hay duda sobre dependencias, PREGUNTAR. Es mejor preguntar que violar el UML.** 